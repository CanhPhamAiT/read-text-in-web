<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Äá»c to ná»™i dung chÆ°Æ¡ng truyá»‡n trÃªn metruyencv.com vÃ  tangthuvien.net" />
    <meta name="theme-color" content="#2563eb" />
    <title>Chapter Reader - PWA</title>
    <link rel="manifest" href="manifest.json" />
    <link rel="stylesheet" href="app.css" />
    <link rel="icon" type="image/png" href="icons/icon192.png" />
  </head>
  <body>
    <header>
      <h1>ğŸ“– Chapter Reader</h1>
      <p>Äá»c to ná»™i dung chÆ°Æ¡ng truyá»‡n</p>
    </header>

    <section class="setup-section" id="setupSection">
      <div class="card">
        <h2>ğŸš€ BÆ°á»›c 1: CÃ i Ä‘áº·t Bookmarklet</h2>
        <p>Äá»ƒ sá»­ dá»¥ng PWA nÃ y, báº¡n cáº§n cÃ i Ä‘áº·t bookmarklet vÃ o trÃ¬nh duyá»‡t:</p>
        <ol>
          <li>KÃ©o nÃºt bÃªn dÆ°á»›i vÃ o thanh bookmark cá»§a trÃ¬nh duyá»‡t</li>
          <li>Hoáº·c copy link vÃ  thÃªm vÃ o bookmark</li>
        </ol>
        <div class="bookmarklet-container">
          <a href="#" id="bookmarkletLink" class="bookmarklet-btn" draggable="true">
            ğŸ“– Chapter Reader
          </a>
          <button type="button" id="copyBookmarkletBtn" class="btn-secondary">Copy Link</button>
        </div>
        <div class="alert alert-info" id="bookmarkletAlert" hidden>
          <strong>ÄÃ£ copy!</strong> DÃ¡n vÃ o bookmark cá»§a báº¡n.
        </div>
      </div>

      <div class="card">
        <h2>ğŸ“± BÆ°á»›c 2: Má»Ÿ trang truyá»‡n</h2>
        <p>Má»Ÿ trang chÆ°Æ¡ng truyá»‡n trÃªn:</p>
        <div class="site-links">
          <a href="https://metruyencv.com" target="_blank" class="site-link">metruyencv.com</a>
          <a href="https://tangthuvien.net" target="_blank" class="site-link">tangthuvien.net</a>
        </div>
        <p class="hint">Sau khi má»Ÿ trang, click vÃ o bookmarklet Ä‘Ã£ cÃ i Ä‘áº·t á»Ÿ bÆ°á»›c 1.</p>
      </div>
    </section>

    <section class="control-section" id="controlSection" hidden>
      <div class="status-bar">
        <div class="status-item">
          <span class="label">Tráº¡ng thÃ¡i:</span>
          <span id="statusText">ChÆ°a káº¿t ná»‘i</span>
        </div>
        <div class="status-item">
          <span class="label">ChÆ°Æ¡ng:</span>
          <span id="chapterName">-</span>
        </div>
      </div>

      <form id="controls" class="card">
        <label>
          TTS Engine
          <select id="engineSelect">
            <option value="browser">Browser (Web Speech API)</option>
            <option value="coqui">Google TTS (Local Server)</option>
          </select>
        </label>

        <div id="browserOptions" style="display: block;">
          <label>
            Giá»ng Ä‘á»c
            <select id="voiceSelect"></select>
          </label>
          <label>
            Tá»‘c Ä‘á»™: <span id="rateValue">1.0</span>
            <input type="range" id="rate" min="0.8" max="2.4" step="0.05" value="1" />
          </label>
          <label>
            Cao Ä‘á»™: <span id="pitchValue">1.0</span>
            <input type="range" id="pitch" min="0.6" max="1.4" step="0.05" value="1" />
          </label>
        </div>

        <div id="coquiOptions" style="display: none;">
          <label>
            Server URL
            <input type="text" id="coquiUrl" value="http://localhost:5002" placeholder="http://localhost:5002" />
          </label>
          <div class="coqui-status">
            <span class="label">Tráº¡ng thÃ¡i server:</span>
            <span id="coquiStatus">ChÆ°a kiá»ƒm tra</span>
            <button type="button" id="checkCoquiBtn" class="btn-small">Kiá»ƒm tra</button>
          </div>
          <label>
            Giá»ng Ä‘á»c
            <select id="coquiVoiceSelect">
              <option value="vi-VN-HoaiMyNeural">HoÃ i My (Ná»¯)</option>
              <option value="vi-VN-NamMinhNeural">Nam Minh (Nam)</option>
              <option value="en-US-JennyNeural">Jenny (English)</option>
            </select>
          </label>
          <label>
            Tá»‘c Ä‘á»™: <span id="coquiRateValue">1.0</span>
            <input type="range" id="coquiRate" min="0.5" max="2.5" step="0.1" value="1" />
          </label>
        </div>

        <label class="checkbox">
          <input type="checkbox" id="sanitize" checked />
          Loáº¡i kÃ½ tá»± Ä‘áº·c biá»‡t
        </label>
        <label class="checkbox">
          <input type="checkbox" id="autoNext" checked />
          Tá»± chuyá»ƒn chÆ°Æ¡ng káº¿ tiáº¿p
        </label>

        <div class="buttons">
          <button type="button" id="startBtn" class="btn-primary">Báº¯t Ä‘áº§u</button>
          <button type="button" id="pauseBtn" class="btn-secondary" disabled>Táº¡m dá»«ng</button>
          <button type="button" id="resumeBtn" class="btn-secondary" disabled>Tiáº¿p tá»¥c</button>
          <button type="button" id="stopBtn" class="btn-danger" disabled>Dá»«ng</button>
        </div>

        <p id="error" class="error" hidden></p>
      </form>
    </section>

    <footer>
      <p class="hint">
        ğŸ’¡ <strong>Tip:</strong> Sau khi cÃ i Ä‘áº·t bookmarklet, báº¡n cÃ³ thá»ƒ Ä‘Ã³ng PWA nÃ y vÃ  sá»­ dá»¥ng bookmarklet trá»±c tiáº¿p trÃªn trang truyá»‡n.
      </p>
    </footer>

    <script src="app.js" type="module"></script>
  </body>
</html>

